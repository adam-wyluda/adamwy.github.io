
<!DOCTYPE html>
<html>
  <head>
    <title>Reflection - アノテーション、名前、スコープ、その他 - Scala Documentation</title>
    
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>

    <link rel="icon" type="image/png" href="/resources/favicon.ico">

    <!-- prettify js and CSS -->
    <link rel="stylesheet" href="/resources/stylesheets/prettify.css" type="text/css" />
    <script src="/resources/javascript/prettify/prettify.js" type="text/javascript" ></script>


    <!-- jquery js -->
    <script src="/resources/javascript/jquery.js" type="text/javascript" ></script>
    <script src="/resources/javascript/effects.core.js" type="text/javascript" ></script>
    <script src="/resources/javascript/effects.highlight.js" type="text/javascript" ></script>
    <script src="/resources/javascript/moveScroller.js" type="text/javascript" ></script>

    <!-- Bootstrap JS and CSS -->
    <link rel="stylesheet" href="/resources/stylesheets/bootstrap.css" type="text/css" />
	  <script src="/resources/javascript/bootstrap-dropdown.js" type="text/javascript" ></script>
	  <script src="/resources/javascript/bootstrap-dropdown-app.js" type="text/javascript" ></script>

    <!-- Base stylesheet for all pages -->
    <link rel="stylesheet" href="/resources/stylesheets/base.css" type="text/css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css" />
    <link rel="stylesheet" href="/resources/stylesheets/search.css" type="text/css" />

    <!-- table of contents js -->
    <script src="/resources/javascript/toc.js" type="text/javascript" ></script>


    <!-- styles for pager and table of contents -->
    <link rel="stylesheet" href="/resources/stylesheets/pager.css" type="text/css" />
    <link rel="stylesheet" href="/resources/stylesheets/toc.css" type="text/css" />

    <!-- google analytics -->
	<script type="text/javascript">

	  var _gaq = _gaq || [];
	  _gaq.push(['_setAccount', 'UA-574683-5']);
	  _gaq.push(['_trackPageview']);

	  (function() {
	    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
	    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
	    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
	  })();

	</script>

    <!-- prettyprint js to prepend generated pre/code tags -->
    <script type="text/javascript">
      function styleCode()
        {
          if (typeof disableStyleCode != "undefined")
          {
              return;
          }
          var a = false;
          $("pre code").parent().each(function()
          {
              if (!$(this).hasClass("prettyprint"))
              {
                  $(this).addClass("prettyprint lang-scala linenums");
                  a = true
              }
          });
          if (a) { prettyPrint() }
      }
    </script>

    <script type="text/javascript">
      jQuery(document).ready(function($) {

            $(".scroll").click(function(event){
              event.preventDefault();
              $('html,body').animate({scrollTop:$(this.hash).offset().top}, 500);
              $('html,body').animate({scrollTop:$(this.hash).offset().top-=50}, 500);
              $(this.hash).effect("highlight", {color: "#FFCC85"}, 3000);
            });
      });
    </script>

    <script type="text/javascript">
      $(window).ready(function goToSubsection() {
          if (window.location.hash)
          {
              $('html,body').animate({scrollTop:$(window.location.hash).offset().top}, 500);
              $('html,body').animate({scrollTop:$(window.location.hash).offset().top-=50}, 500);
              $(window.location.hash).effect("highlight", {color: "#FFCC85"}, 3000);
          }
        });
    </script>

    <style type="text/css">

       p.contents {
           margin-left: 15px;
           font-weight: bold;
           font-size: 16px;
       }

       div#toc ul {
           list-style: none;
       }

       div#toc ul a {
           display: block;
           list-style: none;
           line-height: 22px;
           font-weight: bold;
           width: 100%;
       }

      div#toc ul li ul {
           list-style: disc;
      }

      div#toc ul li ul a {
           line-height: 18px;
           font-weight: normal;
      }

      div#toc ul li ul li ul {
           list-style: square;
      }
       div#toc ul li ul li ul a {
       }

       div#scroller-anchor {
           width: inherit;
       }

       div#scroller {
           width: inherit;
       }

       div#guide-title {
        text-transform: capitalize;
        font-size: 16px;
        padding-bottom: 6px;
        color: #BFBFBF;
        text-transform: uppercase;
        font-weight: bold;
       }

       input, textarea, select, .uneditable-input {
	       width: 165px;
	     }

    </style>

</head>
<body onload="styleCode()">

    <!-- Topbar
    ================================================== -->
<div class="topbar">
    <div class="topbar-inner">
        <div class="container">
            <a class="brand" href="/index.html"><img src="/resources/images/scala-logo.png"> Documentation</a>
            <ul class="nav">

                <li class="menu">
                      <a href="#" class="menu">API</a>
                      <ul class="menu-dropdown">
                        <li><a href="http://www.scala-lang.org/api/current/">Current</a></li>
                        <li><a href="http://www.scala-lang.org/files/archive/nightly/2.11.x/api/2.11.x/">Nightly</a></li>
                        <!--<li class="divider"></li>
                        <li><a href="#">Previous Versions</a></li>
                        -->
                      </ul>
                </li>

                <li class="menu">
                      <a href="#" class="menu">Learn</a>
                      <ul class="menu-dropdown">
                        <li><a href="/overviews">Guides & Overviews</a></li>
                        <li><a href="/tutorials">Tutorials</a></li>
                        <li><a href="/style">Scala Style Guide</a></li>
                      </ul>
                </li>

                <li class="menu">
                      <a href="#" class="menu">Quickref</a>
                      <ul class="menu-dropdown">
                        <li><a href="/glossary">Glossary</a></li>
                        <li><a href="/cheatsheets">Cheatsheets</a></li>
                      </ul>
                </li>

                <li><a href="/contribute.html">Contribute</a></li>
                <li><a href="/sips">SIPs/SLIPs</a></li>
                <li>
                    <form id="searchform" action="#">
                        <input type="text" placeholder="Search in documentation..." class="field" name="q" id="q"/>
                    </form>
                </li>
            </ul>
        </div>
    </div>
</div>


<div class="container">
  <div class="row">

    <div class="span10"><div id="guide-title">reflection</div></div>
    <div class="span10"><h1>アノテーション、名前、スコープ、その他</h1></div>

    

    

    <div class="span6">
      
      <ul class="langbar">
        <li><a href="/overviews/reflection/annotations-names-scopes" class="lang">English</a></li>
        
          
          <li><a href="/ja/overviews/reflection/annotations-names-scopes" class="lang">日本語</a></li>
        
      </ul>
      
    </div>

    <div class="span10">
      <p><span class="label important" style="float: right;">EXPERIMENTAL</span></p>

<h2 id="section">アノテーション</h2>

<p>Scala において宣言は <code class="highlighter-rouge">scala.annotation.Annotation</code> のサブタイプを用いて注釈を付けることができる。
さらに、Scala は <a href="http://docs.oracle.com/javase/7/docs/technotes/guides/language/annotations.html#_top">Java のアノテーションシステム</a>に統合するため、標準 Java コンパイラによって生成されたアノテーションを取り扱うこともできる。</p>

<p>アノテーションは、それが永続化されていればリフレクションを使ってインスペクトすることができるため、アノテーション付きの宣言を含むクラスファイルから読み込むことができる。カスタムアノテーション型は
<code class="highlighter-rouge">scala.annotation.StaticAnnotation</code> か
<code class="highlighter-rouge">scala.annotation.ClassfileAnnotation</code> を継承することで永続化することができる。
その結果、アノテーション型のインスタンスはクラスファイル内の特別な属性として保存される。
実行時リフレクションに必要なメタデータを永続化するには
<code class="highlighter-rouge">scala.annotation.Annotation</code> を継承するだけでは不十分であることに注意してほしい。さらに、
<code class="highlighter-rouge">scala.annotation.ClassfileAnnotation</code> を継承しても実行時には Java
アノテーションとしては認識されないことに注意してほしい。そのためには、Java でアノテーションを書く必要がある。</p>

<p>API は 2種類のアノテーションを区別する:</p>

<ul>
  <li><strong>Java アノテーション</strong>: Java コンパイラによって生成された定義に付加されたアノテーション、つまりプログラムの定義に付けられた <code class="highlighter-rouge">java.lang.annotation.Annotation</code> のサブタイプ。Scala リフレクションによって読み込まれると <code class="highlighter-rouge">scala.annotation.ClassfileAnnotation</code> トレイトが自動的に全ての Java アノテーションに追加される。</li>
  <li><strong>Scala アノテーション</strong>: Scala コンパイラによって生成された定義や型に付加されたアノテーション。</li>
</ul>

<p>Java と Scala のアノテーションの違いは
<code class="highlighter-rouge">scala.reflect.api.Annotations#Annotation</code> に顕著に現れており、これは
<code class="highlighter-rouge">scalaArgs</code> と <code class="highlighter-rouge">javaArgs</code> 両方を公開する。
<code class="highlighter-rouge">scala.annotation.ClassfileAnnotation</code> を継承する
Scala または Java アノテーションに対しては <code class="highlighter-rouge">scalaArgs</code> は空で
(もしあれば) 引数は <code class="highlighter-rouge">javaArgs</code> に保持される。他の全ての Scala
アノテーションの場合は、引数は <code class="highlighter-rouge">scalaArgs</code> に保持され、<code class="highlighter-rouge">javaArgs</code> は空となる。</p>

<p><code class="highlighter-rouge">scalaArgs</code> 内の引数は型付けされた構文木として表される。
これらの構文木はタイプチェッカより後のどのフェーズにおいても変換されないことに注意する必要がある。
<code class="highlighter-rouge">javaArgs</code> 内の引数は <code class="highlighter-rouge">scala.reflect.api.Names#Name</code> から
<code class="highlighter-rouge">scala.reflect.api.Annotations#JavaArgument</code> へのマップとして表現される。
<code class="highlighter-rouge">JavaArgument</code> のインスタンスは Java アノテーションの引数の様々な型を表現する:</p>

<ul>
<li>リテラル (プリミティブ型と文字列の定数)</li>
<li>配列</li>
<li>入れ子になったアノテーション</li>
</ul>

<h2 id="section-1">名前</h2>

<p><strong>名前</strong> (name) は文字列の簡単なラッパーだ。
<a href="http://www.scala-lang.org/api/current/index.html#scala.reflect.api.Names$NameApi"><code class="highlighter-rouge">Name</code></a>
には 2つのサブタイプ <code class="highlighter-rouge">TermName</code> と <code class="highlighter-rouge">TypeName</code> があり (オブジェクトやメンバーのような) 項の名前と
(クラス、トレイト、型メンバのような) 型の名前を区別する。同じオブジェクト内に同名の項と型が共存することができる。別の言い方をすると、型と項は別の名前空間を持つ。</p>

<p>これらの名前はユニバースに関連付けられている。具体例を使って説明しよう。</p>

<div class="highlighter-rouge"><pre class="highlight"><code>scala&gt; import scala.reflect.runtime.universe._
import scala.reflect.runtime.universe._

scala&gt; val mapName = TermName("map")
mapName: scala.reflect.runtime.universe.TermName = map
</code></pre>
</div>

<p>上のコードでは、実行時リフレクション・ユニバースに関連付けられた <code class="highlighter-rouge">Name</code> を作成している。
(これはパス依存型である <code class="highlighter-rouge">reflect.runtime.universe.TermName</code> が表示されていることからも分かる。)</p>

<p>名前は型のメンバの照会に用いられる。例えば、<code class="highlighter-rouge">List</code> クラス内で宣言されている (項である) <code class="highlighter-rouge">map</code> メソッドを検索するには以下のようにする:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>scala&gt; val listTpe = typeOf[List[Int]]
listTpe: scala.reflect.runtime.universe.Type = scala.List[Int]

scala&gt; listTpe.member(mapName)
res1: scala.reflect.runtime.universe.Symbol = method map
</code></pre>
</div>

<p>型メンバを検索するには <code class="highlighter-rouge">TypeName</code> を代わりに使って <code class="highlighter-rouge">member</code> を呼び出す。
暗黙の変換を使って文字列から項もしくは型の名前に変換することもできる:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>scala&gt; listTpe.member("map": TermName)
res2: scala.reflect.runtime.universe.Symbol = method map
</code></pre>
</div>

<h3 id="section-2">標準名</h3>

<p>Scala のプログラムにおいて、「<code class="highlighter-rouge">_root_</code>」のような特定の名前は特殊な意味を持つ。
そのため、それらは Scala の構造物をリフレクションを用いてアクセスするのに欠かすことができない。
例えば、リフレクションを用いてコンストラクタを呼び出すには<strong>標準名</strong> (standard name)
<code class="highlighter-rouge">universe.nme.CONSTRUCTOR</code> を用いる。これは、JVM 上でのコンストラクタ名である項名「<code class="highlighter-rouge">&lt;init&gt;</code>」を指す。</p>

<ul>
  <li>「<code class="highlighter-rouge">&lt;init&gt;</code>」、「<code class="highlighter-rouge">package</code>」、「<code class="highlighter-rouge">_root_</code>」のような<strong>標準項名</strong> (standard term names) と</li>
  <li>「<code class="highlighter-rouge">&lt;error&gt;</code>」、「<code class="highlighter-rouge">_</code>」、「<code class="highlighter-rouge">_*</code>」のような<strong>標準型名</strong> (standard type names)</li>
</ul>

<p>の両方が存在する。</p>

<p>「<code class="highlighter-rouge">package</code>」のようないくつかの名前は型名と項名の両方が存在する。
標準名は <code class="highlighter-rouge">Universe</code> クラスの <code class="highlighter-rouge">nme</code> と <code class="highlighter-rouge">tpnme</code> というメンバとして公開されている。
全ての標準名の仕様は <a href="http://www.scala-lang.org/api/current/index.html#scala.reflect.api.StandardNames">API doc</a> を参照。</p>

<h2 id="section-3">スコープ</h2>

<p><strong>スコープ</strong> (scope) は一般にある構文スコープ内の名前をシンボルに関連付ける。
スコープは入れ子にすることもできる。リフレクション API
で公開されているスコープの基底型は <a href="http://www.scala-lang.org/api/current/index.html#scala.reflect.api.Symbols$Symbol">Symbol</a> の iterable という最小限のインターフェイスのみを公開する。</p>

<p>追加機能は
<a href="http://www.scala-lang.org/api/current/index.html#scala.reflect.api.Types$TypeApi">scala.reflect.api.Types#TypeApi</a>
内で定義されている <code class="highlighter-rouge">member</code> と <code class="highlighter-rouge">declarations</code>
が返す<strong>メンバスコープ</strong> (member scope) にて公開される。
<a href="http://www.scala-lang.org/api/current/index.html#scala.reflect.api.Scopes$MemberScope">scala.reflect.api.Scopes#MemberScope</a>
は <code class="highlighter-rouge">sorted</code> メソッドをサポートしており、これはメンバを<strong>宣言順に</strong>ソートする。</p>

<p>以下に <code class="highlighter-rouge">List</code> クラスでオーバーライドされている全てのシンボルのリストを宣言順に返す具体例をみてみよう:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>scala&gt; val overridden = listTpe.declarations.sorted.filter(_.isOverride)
overridden: List[scala.reflect.runtime.universe.Symbol] = List(method companion, method ++, method +:, method toList, method take, method drop, method slice, method takeRight, method splitAt, method takeWhile, method dropWhile, method span, method reverse, method stringPrefix, method toStream, method foreach)
</code></pre>
</div>

<h2 id="expr">Expr</h2>

<p>構文木の基底型である <code class="highlighter-rouge">scala.reflect.api.Trees#Tree</code> の他に、型付けされた構文木は
<a href="http://www.scala-lang.org/api/current/index.html#scala.reflect.api.Exprs$Expr"><code class="highlighter-rouge">scala.reflect.api.Exprs#Expr</code></a> 型によっても表すことができる。
<code class="highlighter-rouge">Expr</code> は構文木と、その構文木の型に対するアクセスを提供するための型タグをラッピングする。
<code class="highlighter-rouge">Expr</code> は主にマクロのために便宜的に型付けられた構文木を作るために使われる。多くの場合、これは
<code class="highlighter-rouge">reify</code> と <code class="highlighter-rouge">splice</code> メソッドが関わってくる。
(詳細は<a href="http://docs.scala-lang.org/ja/overviews/macros/overview.html">マクロ</a>を参照)</p>

<h2 id="section-4">フラグとフラグ集合</h2>

<p><strong>フラグ</strong> (flag) は
<code class="highlighter-rouge">scala.reflect.api.Trees#Modifiers</code> である <code class="highlighter-rouge">flags</code> を用いて定義を表す構文木に修飾子を与えるのに使われる。
以下に修飾子を受け付ける構文木を挙げる:</p>

<ul>
  <li><code class="highlighter-rouge">scala.reflect.api.Trees#ClassDef</code>。クラスとトレイト。</li>
  <li><code class="highlighter-rouge">scala.reflect.api.Trees#ModuleDef</code>。オブジェクト。</li>
  <li><code class="highlighter-rouge">scala.reflect.api.Trees#ValDef</code>。<code class="highlighter-rouge">val</code>、<code class="highlighter-rouge">var</code>、パラメータ、自分型注釈。</li>
  <li><code class="highlighter-rouge">scala.reflect.api.Trees#DefDef</code>。メソッドとコンストラクタ。</li>
  <li><code class="highlighter-rouge">scala.reflect.api.Trees#TypeDef</code>。型エイリアス、抽象型メンバ、型パラメータ。</li>
</ul>

<p>例えば、<code class="highlighter-rouge">C</code> という名前のクラスを作るには以下のように書く:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>ClassDef(Modifiers(NoFlags), TypeName("C"), Nil, ...)
</code></pre>
</div>

<p>ここでフラグ集合は空だ。<code class="highlighter-rouge">C</code> を private にするには、以下のようにする:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>ClassDef(Modifiers(PRIVATE), TypeName("C"), Nil, ...)
</code></pre>
</div>

<p>垂直バー演算子 (<code class="highlighter-rouge">|</code>) を使って組み合わせることができる。例えば、private final
クラスは以下のように書く:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>ClassDef(Modifiers(PRIVATE | FINAL), TypeName("C"), Nil, ...)
</code></pre>
</div>

<p>全てのフラグのリストは
<code class="highlighter-rouge">scala.reflect.api.FlagSets#FlagValues</code> にて定義されており、
<code class="highlighter-rouge">scala.reflect.api.FlagSets#Flag</code> から公開されている。
(一般的には、これを
<code class="highlighter-rouge">import scala.reflect.runtime.universe.Flag._</code> のようにワイルドカードインポートする。)</p>

<p>定義の構文木はコンパイル後にはシンボルとなるため、これらの構文木の修飾子のフラグは結果となるシンボルのフラグへと変換される。
構文木と違ってシンボルはフラグを公開しないが、<code class="highlighter-rouge">isXXX</code>
というパターンのテストメソッドを提供する
(例えば <code class="highlighter-rouge">isFinal</code> は final かどうかをテストする)。
特定のフラグはある種類のシンボルでしか使われないため、場合によってはシンボルを
<code class="highlighter-rouge">asTerm</code>、<code class="highlighter-rouge">asType</code>、<code class="highlighter-rouge">asClass</code> といったメソッドを使って変換する必要がある。</p>

<p><strong>注意:</strong> リフレクションAPI のこの部分は再設計の候補に挙がっている。リフレクションAPI
の将来のリリースにおいてフラグ集合が他のものと置き換わる可能性がある。</p>

<h2 id="section-5">定数</h2>

<p>Scala の仕様において<strong>定数式</strong> (constant expression) と呼ばれる式は
Scala コンパイラによってコンパイル時に評価することができる。
以下に挙げる式の種類はコンパイル時定数だ。
(<a href="http://scala-lang.org/files/archive/spec/2.11/06-expressions.html#constant-expressions">Scala 言語仕様 の 6.24</a> 参照):</p>

<ol>
  <li>プリミティブ値クラスのリテラル (<a href="http://www.scala-lang.org/api/current/index.html#scala.Byte">Byte</a>、 <a href="http://www.scala-lang.org/api/current/index.html#scala.Short">Short</a>、 <a href="http://www.scala-lang.org/api/current/index.html#scala.Int">Int</a>、 <a href="http://www.scala-lang.org/api/current/index.html#scala.Long">Long</a>、 <a href="http://www.scala-lang.org/api/current/index.html#scala.Float">Float</a>、 <a href="http://www.scala-lang.org/api/current/index.html#scala.Double">Double</a>、 <a href="http://www.scala-lang.org/api/current/index.html#scala.Char">Char</a>、 <a href="http://www.scala-lang.org/api/current/index.html#scala.Boolean">Boolean</a> および <a href="http://www.scala-lang.org/api/current/index.html#scala.Unit">Unit</a>)。これは直接対応する型で表される。</li>
  <li>文字列リテラル。これは文字列のインスタンスとして表される。</li>
  <li>一般に <a href="http://www.scala-lang.org/api/current/index.html#scala.Predef$@classOf[T]:Class[T]">scala.Predef#classOf</a> で構築されるクラスへの参照。<a href="http://www.scala-lang.org/api/current/index.html#scala.reflect.api.Types$Type">型</a>として表される。</li>
  <li>Java の列挙要素。<a href="http://www.scala-lang.org/api/current/index.html#scala.reflect.api.Symbols$Symbol">シンボル</a>として表される。</li>
</ol>

<p>定数式の用例としては</p>

<ul>
  <li>構文木内のリテラル (<code class="highlighter-rouge">scala.reflect.api.Trees#Literal</code> 参照)</li>
  <li>Java のクラスファイルアノテーションへ渡されるリテラル (<code class="highlighter-rouge">scala.reflect.api.Annotations#LiteralArgument</code> 参照)</li>
</ul>

<p>などがある。具体例をみてみよう。</p>

<div class="highlighter-rouge"><pre class="highlight"><code>Literal(Constant(5))
</code></pre>
</div>

<p>上の式は Scala ソース内での整数リテラル <code class="highlighter-rouge">5</code> を表す AST を構築する。</p>

<p><code class="highlighter-rouge">Constant</code> は「仮想ケースクラス」の一例で、普通のクラスなのだが、あたかもケースクラスであるかのうように構築したりパターンマッチしたりすることができる。
<code class="highlighter-rouge">Literal</code> と <code class="highlighter-rouge">LiteralArgument</code> の両方ともがリテラルのコンパイル時定数を返す
<code class="highlighter-rouge">value</code> メソッドを公開する。</p>

<p>具体例で説明しよう:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>Constant(true) match {
  case Constant(s: String)  =&gt; println("A string: " + s)
  case Constant(b: Boolean) =&gt; println("A Boolean value: " + b)
  case Constant(x)          =&gt; println("Something else: " + x)
}
assert(Constant(true).value == true)
</code></pre>
</div>

<p>クラス参照は <code class="highlighter-rouge">scala.reflect.api.Types#Type</code> のインスタンスを用いて表される。
この参照は、<code class="highlighter-rouge">scala.reflect.runtime.currentMirror</code> のような
<code class="highlighter-rouge">RuntimeMirror</code> の <code class="highlighter-rouge">runtimeClass</code> メソッドを用いてランタイムクラスへと変換することができる。
(Scala コンパイラがクラス参照の処理を行なっている段階においては、その参照が指すランタイムクラスがまだコンパイルされていない可能性があるため、このように型からランタイムクラスへと変換することが必要となる。)</p>

<p>Java の列挙要素への参照はシンボル (<code class="highlighter-rouge">scala.reflect.api.Symbols#Symbol</code>)
として表され、対応する列挙要素を JVM 上で返すことができるメソッドを持つ。
<code class="highlighter-rouge">RuntimeMirror</code> を使って対応する列挙型や列挙値への参照の実行時の値をインスペクトすることができる。</p>

<p>具体例をみてこう:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>// Java ソース:
enum JavaSimpleEnumeration { FOO, BAR }

import java.lang.annotation.*;
@Retention(RetentionPolicy.RUNTIME)
@Target({ElementType.TYPE})
public @interface JavaSimpleAnnotation {
  Class&lt;?&gt; classRef();
  JavaSimpleEnumeration enumRef();
}

@JavaSimpleAnnotation(
  classRef = JavaAnnottee.class,
  enumRef = JavaSimpleEnumeration.BAR
)
public class JavaAnnottee {}

// Scala ソース:
import scala.reflect.runtime.universe._
import scala.reflect.runtime.{currentMirror =&gt; cm}

object Test extends App {
  val jann = typeOf[JavaAnnottee].typeSymbol.annotations(0).javaArgs

  def jarg(name: String) = jann(TermName(name)) match {
    // Constant is always wrapped in a Literal or LiteralArgument tree node
    case LiteralArgument(ct: Constant) =&gt; value
    case _ =&gt; sys.error("Not a constant")
  }

  val classRef = jarg("classRef").value.asInstanceOf[Type]
  println(showRaw(classRef))         // TypeRef(ThisType(), JavaAnnottee, List())
  println(cm.runtimeClass(classRef)) // class JavaAnnottee

  val enumRef = jarg("enumRef").value.asInstanceOf[Symbol]
  println(enumRef)                   // value BAR

  val siblings = enumRef.owner.typeSignature.declarations
  val enumValues = siblings.filter(sym =&gt; sym.isVal &amp;&amp; sym.isPublic)
  println(enumValues)                // Scope {
                                     //   final val FOO: JavaSimpleEnumeration;
                                     //   final val BAR: JavaSimpleEnumeration
                                     // }

  val enumClass = cm.runtimeClass(enumRef.owner.asClass)
  val enumValue = enumClass.getDeclaredField(enumRef.name.toString).get(null)
  println(enumValue)                 // BAR
}
</code></pre>
</div>

<h2 id="section-6">プリティプリンタ</h2>

<p><a href="http://www.scala-lang.org/api/current/index.html#scala.reflect.api.Trees"><code class="highlighter-rouge">Trees</code></a> と
<a href="http://www.scala-lang.org/api/current/index.html#scala.reflect.api.Types"><code class="highlighter-rouge">Types</code></a>
を整形して表示するユーティリティを説明しよう。</p>

<h3 id="section-7">構文木の表示</h3>

<p><code class="highlighter-rouge">show</code> メソッドは、リフレクションオブジェクトを整形して表示する。
この形式は Scala コードの糖衣構文を展開して Java のようしたものを提供する。具体例をみていこう:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>scala&gt; import scala.reflect.runtime.universe._
import scala.reflect.runtime.universe._

scala&gt; def tree = reify { final class C { def x = 2 } }.tree
tree: scala.reflect.runtime.universe.Tree

scala&gt; show(tree)
res0: String =
{
  final class C extends AnyRef {
    def &lt;init&gt;() = {
      super.&lt;init&gt;();
      ()
    };
    def x = 2
  };
  ()
}
</code></pre>
</div>

<p><code class="highlighter-rouge">showRaw</code> メソッドは、Scala の構文木 (AST) のようなリフレクションオブジェクトの内部構造を表示する。
これは Scala のタイプチェッカが見るものと同じものだ。</p>

<p>ここで注意すべきなのは、この形式どおりに構文木を構築すればマクロの実装でも使えるのじゃないかと思うかもしれないが、うまくいかないことが多いということだ。これはシンボルについての情報などが完全には表示されていないためだ (名前だけが表示される)。
そのため、妥当な Scala コードがあるときにその AST をインスペクトするのに向いていると言える。</p>

<div class="highlighter-rouge"><pre class="highlight"><code>scala&gt; showRaw(tree)
res1: String = Block(List(
  ClassDef(Modifiers(FINAL), TypeName("C"), List(), Template(
    List(Ident(TypeName("AnyRef"))),
    emptyValDef,
    List(
      DefDef(Modifiers(), nme.CONSTRUCTOR, List(), List(List()), TypeTree(),
        Block(List(
          Apply(Select(Super(This(tpnme.EMPTY), tpnme.EMPTY), nme.CONSTRUCTOR), List())),
          Literal(Constant(())))),
      DefDef(Modifiers(), TermName("x"), List(), List(), TypeTree(),
        Literal(Constant(2))))))),
  Literal(Constant(())))
</code></pre>
</div>

<p><code class="highlighter-rouge">showRaw</code> はインスペクトしたものの <code class="highlighter-rouge">scala.reflect.api.Types</code> を併記することができる。</p>

<div class="highlighter-rouge"><pre class="highlight"><code>scala&gt; import scala.tools.reflect.ToolBox // requires scala-compiler.jar
import scala.tools.reflect.ToolBox

scala&gt; import scala.reflect.runtime.{currentMirror =&gt; cm}
import scala.reflect.runtime.{currentMirror=&gt;cm}

scala&gt; showRaw(cm.mkToolBox().typeCheck(tree), printTypes = true)
res2: String = Block[1](List(
  ClassDef[2](Modifiers(FINAL), TypeName("C"), List(), Template[3](
    List(Ident[4](TypeName("AnyRef"))),
    emptyValDef,
    List(
      DefDef[2](Modifiers(), nme.CONSTRUCTOR, List(), List(List()), TypeTree[3](),
        Block[1](List(
          Apply[4](Select[5](Super[6](This[3](TypeName("C")), tpnme.EMPTY), ...))),
          Literal[1](Constant(())))),
      DefDef[2](Modifiers(), TermName("x"), List(), List(), TypeTree[7](),
        Literal[8](Constant(2))))))),
  Literal[1](Constant(())))
[1] TypeRef(ThisType(scala), scala.Unit, List())
[2] NoType
[3] TypeRef(NoPrefix, TypeName("C"), List())
[4] TypeRef(ThisType(java.lang), java.lang.Object, List())
[5] MethodType(List(), TypeRef(ThisType(java.lang), java.lang.Object, List()))
[6] SuperType(ThisType(TypeName("C")), TypeRef(... java.lang.Object ...))
[7] TypeRef(ThisType(scala), scala.Int, List())
[8] ConstantType(Constant(2))
</code></pre>
</div>

<h3 id="section-8">型の表示</h3>

<p><code class="highlighter-rouge">show</code> メソッドは型を<strong>可読な</strong>文字列形式で表示することができる:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>scala&gt; import scala.reflect.runtime.universe._
import scala.reflect.runtime.universe._

scala&gt; def tpe = typeOf[{ def x: Int; val y: List[Int] }]
tpe: scala.reflect.runtime.universe.Type

scala&gt; show(tpe)
res0: String = scala.AnyRef{def x: Int; val y: scala.List[Int]}
</code></pre>
</div>

<p><code class="highlighter-rouge">scala.reflect.api.Trees</code> のための <code class="highlighter-rouge">showRaw</code> 同様に、
<code class="highlighter-rouge">scala.reflect.api.Types</code> のための <code class="highlighter-rouge">showRaw</code>
は Scala タイプチェッカが使う Scala AST を表示する。</p>

<div class="highlighter-rouge"><pre class="highlight"><code>scala&gt; showRaw(tpe)
res1: String = RefinedType(
  List(TypeRef(ThisType(scala), TypeName("AnyRef"), List())),
  Scope(
    TermName("x"),
    TermName("y")))
</code></pre>
</div>

<p>この <code class="highlighter-rouge">showRaw</code> メソッドにはデフォルトでは <code class="highlighter-rouge">false</code>
になっている名前付きパラメータ <code class="highlighter-rouge">printIds</code> と <code class="highlighter-rouge">printKinds</code> を持つ。
<code class="highlighter-rouge">true</code> を渡すことで <code class="highlighter-rouge">showRaw</code> はシンボルのユニークID
とシンボルの種類 (パッケージ、型、メソッド、getter その他) を表示することができる。</p>

<div class="highlighter-rouge"><pre class="highlight"><code>scala&gt; showRaw(tpe, printIds = true, printKinds = true)
res2: String = RefinedType(
  List(TypeRef(ThisType(scala#2043#PK), TypeName("AnyRef")#691#TPE, List())),
  Scope(
    TermName("x")#2540#METH,
    TermName("y")#2541#GET))
</code></pre>
</div>

<h2 id="section-9">位置情報</h2>

<p><strong>位置情報</strong> (<a href="http://www.scala-lang.org/api/current/index.html#scala.reflect.api.Position"><code class="highlighter-rouge">Position</code></a>)
はシンボルや構文木のノードの出処を追跡するのに使われる。警告やエラーの表示でよく使われ、プログラムのどこが間違ったのかを正確に表示することができる。位置情報はソースファイルの列と行を表す。
(ソースファイルの初めからのオフセットは「ポイント」と呼ばれるが、これは便利ではないことがある)
位置情報はそれが指す行の内容も保持する。全ての構文木やシンボルが位置情報を持つわけではなく、ない場合は
<code class="highlighter-rouge">NoPosition</code> オブジェクトで表される。</p>

<p>位置情報はソースファイルの 1文字を指すこともできれば、文字の範囲を指すこともできる。
前者の場合は<strong>オフセット位置情報</strong> (offset position)、後者の場合は<strong>範囲位置情報</strong>
(range position) が使われる。範囲位置情報は <code class="highlighter-rouge">start</code> と <code class="highlighter-rouge">end</code> オフセットを保持する。
 <code class="highlighter-rouge">start</code> と <code class="highlighter-rouge">end</code> オフセットは <code class="highlighter-rouge">focusStart</code> と <code class="highlighter-rouge">focusEnd</code>
メソッドを用いて「フォーカス」することができ、これは位置情報を返す
(範囲位置情報では無い位置情報に対して呼ばれた場合は <code class="highlighter-rouge">this</code> を返す) 。</p>

<p>位置情報はいくつかのメソッドを使って比較することができる。
<code class="highlighter-rouge">precedes</code> メソッドは、2つの位置情報が定義済みであり (つまり <code class="highlighter-rouge">NoPosition</code> ではない)、かつ
<code class="highlighter-rouge">this</code> の位置情報の終点が与えられた位置情報の始点を超えない場合に真を返す。
他にも、範囲位置情報は (<code class="highlighter-rouge">includes</code> メソッドを用いて) 包含関係を調べたり、
(<code class="highlighter-rouge">overlaps</code> メソッドを用いて) 交差関係を調べることができる。</p>

<p>範囲位置情報は<strong>透明</strong> (transparent) か<strong>非透明</strong> (opaque) だ。
範囲位置情報を持つ構文木は以下の不変条件を満たす必要があるため、範囲位置情報が透明か非透明であるかは許可される用法に関わってくる:</p>

<ul>
  <li>オフセット位置情報を持つ構文木は範囲位置情報を持つ部分木を持ってはいけない。</li>
  <li>範囲位置情報を持つ構文木が範囲位置情報を持つ部分木を持つ場合、部分木の範囲は親の範囲に包含されなくてはいけない。</li>
  <li>同じノードの部分木の非透明な範囲位置情報同士は交差してはいけない。 (このため、交差は最大で単一の点となる)</li>
</ul>

<p><code class="highlighter-rouge">makeTransparent</code> メソッドを使って非透明な範囲位置情報を透明な他は何も変わらないものに変換することができる。</p>

      <div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
  
    var disqus_shortname = 'scalajp'; // required: replace example with your forum shortname
  

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>

    </div>

    <div class="span6">
      <div id="scroller-anchor">
  <div id="scroller">
    <p class="contents">Contents</p>




  <ul>
    
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
        
          <li><a href="/ja/overviews/reflection/overview">概要</a></li>
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
    
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
        
          <li><a href="/ja/overviews/reflection/environment-universes-mirrors">環境、ユニバース、ミラー</a></li>
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
    
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
        
          <li><a href="/ja/overviews/reflection/symbols-trees-types">シンボル、構文木、型</a></li>
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
    
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
        
          <li><a href="/ja/overviews/reflection/annotations-names-scopes">アノテーション、名前、スコープ、その他</a></li>
           
        
          <div id="toc"></div>
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
    
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
        
          <li><a href="/ja/overviews/reflection/typetags-manifests">型タグとマニフェスト</a></li>
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
    
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
        
          <li><a href="/ja/overviews/reflection/thread-safety">スレッドセーフティ</a></li>
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
    
  </ul>


  </div>
</div>
    </div>


  </div>
</div>

<div class="footer">
	<div class="container">
		<ul>
			<li><h5>API</h5></li>
			<li><a href="http://www.scala-lang.org/api/current/">Current</a></li>
			<li><a href="http://www.scala-lang.org/files/archive/nightly/2.11.x/api/2.11.x/">Nightly</a></li>
		</ul>
		<ul>
			<li><h5>Learn</h5></li>
			<li><a href="/overviews">Guides & Overviews</a></li>
			<li><a href="/tutorials">Tutorials</a></li>
			<li><a href="/style">Scala Style Guide</a></li>
		</ul>
		<ul>
			<li><h5>Quickref</h5></li>
			<li><a href="/glossary">Glossary</a></li>
			<li><a href="/cheatsheets">Cheatsheets</a></li>
		</ul>
		<ul>
			<li><h5>Contribute</h5></li>
			<li><a href="http://github.com/scala/scala.github.com">Source Code</a></li>
			<li><a href="/contribute.html">Contributors Guide</a></li>
			<li><a href="http://getsatisfaction.com/scaladocs">Suggestions</a></li>
		</ul>
		<ul>
			<li><h5>Other Resources</h5></li>
			<li><a href="/sips">Scala Improvement Process</a></li>
		</ul>
	</div>
	<div class="container copyright">
 		<p>
			Copyright &copy; 2011-2015 EPFL. All rights reserved.
			<a href="https://github.com/scala/scala.github.com/commits/gh-pages.atom"><img align="right" height="20px" width="20px" src="/resources/images/rss.png" alt="RSS feed of updates to the github repo hosting this site"></a>
		</p>
	</div>
</div>

<!-- search -->
<script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script>
<script type="text/javascript"> docsearch({
  apiKey: 'b66eaeec6bd214ea6c0fcd2d7b7fdfe8',
  indexName: 'scala-docs',
  inputSelector: '#q',
	autocompleteOptions: {
    debug: true
  },
  algoliaOptions: {
		"hitsPerPage": 5,
		"facetFilters": "(tags:en)"
	}
});
</script>



<script type="text/javascript">
  $('#toc').toc({exclude: 'h1, h5, h6', context: '', autoId: true, numerate: false});
</script>

<script type="text/javascript">
  $(function() {
    moveScroller();
  });
</script>

  </body>
</html>


