
<!DOCTYPE html>
<html>
  <head>
    <title>Interpolación de cadenas - Scala Documentation</title>
    
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>

    <link rel="icon" type="image/png" href="/resources/favicon.ico">

    <!-- prettify js and CSS -->
    <link rel="stylesheet" href="/resources/stylesheets/prettify.css" type="text/css" />
    <script src="/resources/javascript/prettify/prettify.js" type="text/javascript" ></script>


    <!-- jquery js -->
    <script src="/resources/javascript/jquery.js" type="text/javascript" ></script>
    <script src="/resources/javascript/effects.core.js" type="text/javascript" ></script>
    <script src="/resources/javascript/effects.highlight.js" type="text/javascript" ></script>
    <script src="/resources/javascript/moveScroller.js" type="text/javascript" ></script>

    <!-- Bootstrap JS and CSS -->
    <link rel="stylesheet" href="/resources/stylesheets/bootstrap.css" type="text/css" />
	  <script src="/resources/javascript/bootstrap-dropdown.js" type="text/javascript" ></script>
	  <script src="/resources/javascript/bootstrap-dropdown-app.js" type="text/javascript" ></script>

    <!-- Base stylesheet for all pages -->
    <link rel="stylesheet" href="/resources/stylesheets/base.css" type="text/css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css" />
    <link rel="stylesheet" href="/resources/stylesheets/search.css" type="text/css" />

    <!-- table of contents js -->
    <script src="/resources/javascript/toc.js" type="text/javascript" ></script>


    <!-- styles for pager and table of contents -->
    <link rel="stylesheet" href="/resources/stylesheets/pager.css" type="text/css" />
    <link rel="stylesheet" href="/resources/stylesheets/toc.css" type="text/css" />

    <!-- google analytics -->
	<script type="text/javascript">

	  var _gaq = _gaq || [];
	  _gaq.push(['_setAccount', 'UA-574683-5']);
	  _gaq.push(['_trackPageview']);

	  (function() {
	    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
	    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
	    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
	  })();

	</script>

    <!-- prettyprint js to prepend generated pre/code tags -->
    <script type="text/javascript">
      function styleCode()
        {
          if (typeof disableStyleCode != "undefined")
          {
              return;
          }
          var a = false;
          $("pre code").parent().each(function()
          {
              if (!$(this).hasClass("prettyprint"))
              {
                  $(this).addClass("prettyprint lang-scala linenums");
                  a = true
              }
          });
          if (a) { prettyPrint() }
      }
    </script>

    <script type="text/javascript">
      jQuery(document).ready(function($) {

            $(".scroll").click(function(event){
              event.preventDefault();
              $('html,body').animate({scrollTop:$(this.hash).offset().top}, 500);
              $('html,body').animate({scrollTop:$(this.hash).offset().top-=50}, 500);
              $(this.hash).effect("highlight", {color: "#FFCC85"}, 3000);
            });
      });
    </script>

    <script type="text/javascript">
      $(window).ready(function goToSubsection() {
          if (window.location.hash)
          {
              $('html,body').animate({scrollTop:$(window.location.hash).offset().top}, 500);
              $('html,body').animate({scrollTop:$(window.location.hash).offset().top-=50}, 500);
              $(window.location.hash).effect("highlight", {color: "#FFCC85"}, 3000);
          }
        });
    </script>

    <style type="text/css">

       p.contents {
           margin-left: 15px;
           font-weight: bold;
           font-size: 16px;
       }

       div#toc ul {
           list-style: none;
       }

       div#toc ul a {
           display: block;
           list-style: none;
           line-height: 22px;
           font-weight: bold;
           width: 100%;
       }

      div#toc ul li ul {
           list-style: disc;
      }

      div#toc ul li ul a {
           line-height: 18px;
           font-weight: normal;
      }

      div#toc ul li ul li ul {
           list-style: square;
      }
       div#toc ul li ul li ul a {
       }

       div#scroller-anchor {
           width: inherit;
       }

       div#scroller {
           width: inherit;
       }

       div#guide-title {
        text-transform: capitalize;
        font-size: 16px;
        padding-bottom: 6px;
        color: #BFBFBF;
        text-transform: uppercase;
        font-weight: bold;
       }

       input, textarea, select, .uneditable-input {
	       width: 165px;
	     }

    </style>

</head>
<body onload="styleCode()">

    <!-- Topbar
    ================================================== -->
<div class="topbar">
    <div class="topbar-inner">
        <div class="container">
            <a class="brand" href="/index.html"><img src="/resources/images/scala-logo.png"> Documentation</a>
            <ul class="nav">

                <li class="menu">
                      <a href="#" class="menu">API</a>
                      <ul class="menu-dropdown">
                        <li><a href="http://www.scala-lang.org/api/current/">Current</a></li>
                        <li><a href="http://www.scala-lang.org/files/archive/nightly/2.11.x/api/2.11.x/">Nightly</a></li>
                        <!--<li class="divider"></li>
                        <li><a href="#">Previous Versions</a></li>
                        -->
                      </ul>
                </li>

                <li class="menu">
                      <a href="#" class="menu">Learn</a>
                      <ul class="menu-dropdown">
                        <li><a href="/overviews">Guides & Overviews</a></li>
                        <li><a href="/tutorials">Tutorials</a></li>
                        <li><a href="/style">Scala Style Guide</a></li>
                      </ul>
                </li>

                <li class="menu">
                      <a href="#" class="menu">Quickref</a>
                      <ul class="menu-dropdown">
                        <li><a href="/glossary">Glossary</a></li>
                        <li><a href="/cheatsheets">Cheatsheets</a></li>
                      </ul>
                </li>

                <li><a href="/contribute.html">Contribute</a></li>
                <li><a href="/sips">SIPs/SLIPs</a></li>
                <li>
                    <form id="searchform" action="#">
                        <input type="text" placeholder="Search in documentation..." class="field" name="q" id="q"/>
                    </form>
                </li>
            </ul>
        </div>
    </div>
</div>


<div class="container">
  <div class="row">
    <div class="span10"><h1>Interpolación de cadenas</h1></div>

    

    

    

    <div class="span6">
      
      <ul class="langbar">
        <li><a href="/overviews/core/string-interpolation" class="lang">English</a></li>
        
          
          <li><a href="/es/overviews/core/string-interpolation" class="lang">Español</a></li>
        
          
          <li><a href="/ja/overviews/core/string-interpolation" class="lang">日本語</a></li>
        
          
          <li><a href="/zh-cn/overviews/core/string-interpolation" class="lang">中文 (简体)</a></li>
        
      </ul>
      
    </div>

    <div class="span10">
      <p><strong>Josh Suereth</strong></p>

<p><strong>Traducción e interpretación: Miguel Ángel Pastor Olivar</strong></p>

<h2 id="introduccin">Introducción</h2>

<p>Desde la versión 2.10.0, Scala ofrece un nuevo mecanismo para la creación de cadenas a partir de nuestros datos mediante la técnica de interpolación de cadenas.
Este nuevo mecanismo permite a los usuarios incluir referencias a variables de manera directa en cadenas de texto “procesadas”. Por ejemplo:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>val name = "James"
println(s"Hello, $name")  // Hello, James
</code></pre>
</div>

<p>En el ejemplo anterior, el literal <code class="highlighter-rouge">s"Hello, $name"</code> es una cadena “procesada”. Esto significa que el compilador debe realizar un trabajo adicional durante el tratamiento de dicha cadena. Una cadena “procesada” se denota mediante un conjunto de caracteres que preceden al símbolo <code class="highlighter-rouge">"</code>. La interpolación de cadenas ha sido introducida por <a href="http://docs.scala-lang.org/sips/pending/string-interpolation.html">SIP-11</a>, el cual contiene todos los detalles de implementación.</p>

<h2 id="uso">Uso</h2>

<p>Scala ofrece tres métodos de interpolación de manera nativa:  <code class="highlighter-rouge">s</code>, <code class="highlighter-rouge">f</code> and <code class="highlighter-rouge">raw</code>.</p>

<h3 id="interpolador-s">Interpolador <code class="highlighter-rouge">s</code></h3>

<p>El uso del prefijo <code class="highlighter-rouge">s</code> en cualquier cadena permite el uso de variables de manera directa dentro de la propia cadena. Ya hemos visto el ejemplo anterior:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>val name = "James"
println(s"Hello, $name")  // Hello, James
</code></pre>
</div>

<p><code class="highlighter-rouge">$name</code> se anida dentro de la cadena “procesada” de tipo <code class="highlighter-rouge">s</code>. El interpolador <code class="highlighter-rouge">s</code> sabe como insertar el valor de la variable <code class="highlighter-rouge">name</code> en lugar indicado, dando como resultado la cadena <code class="highlighter-rouge">Hello, James</code>. Mediante el uso del interpolador <code class="highlighter-rouge">s</code>, cualquier nombre disponible en el ámbito puede ser utilizado dentro de la cadena.</p>

<p>Las interpolaciones pueden recibir expresiones arbitrarias. Por ejemplo:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>println(s"1 + 1 = ${1 + 1}")
</code></pre>
</div>

<p>imprimirá la cadena <code class="highlighter-rouge">1 + 1 = 2</code>. Cualquier expresión puede ser embebida en <code class="highlighter-rouge">${}</code></p>

<h3 id="interpolador-f">Interpolador <code class="highlighter-rouge">f</code></h3>

<p>Prefijando <code class="highlighter-rouge">f</code> a cualquier cadena permite llevar a cabo la creación de cadenas formateadas, del mismo modo que <code class="highlighter-rouge">printf</code> es utilizado en otros lenguajes. Cuando utilizamos este interpolador, todas las referencias a variables deben estar seguidas por una cadena de formateo que siga el formato <code class="highlighter-rouge">printf-</code>, como <code class="highlighter-rouge">%d</code>. Veamos un ejemplo:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>val height = 1.9d
val name = "James"
println(f"$name%s is $height%2.2f meters tall")  // James is 1.90 meters tall
</code></pre>
</div>

<p>El interpolador <code class="highlighter-rouge">f</code> es seguro respecto a tipos. Si pasamos un número real a una cadena de formateo que sólo funciona con números enteros, el compilador emitirá un error. Por ejemplo:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>val height: Double = 1.9d

scala&gt; f"$height%4d"
&lt;console&gt;:9: error: type mismatch;
 found   : Double
 required: Int
           f"$height%4d"
              ^
</code></pre>
</div>

<p>El interpolador <code class="highlighter-rouge">f</code> hace uso de las utilidades de formateo de cadenas disponibles en java. Los formatos permitidos tras el carácter <code class="highlighter-rouge">%</code> son descritos en <a href="http://docs.oracle.com/javase/1.6.0/docs/api/java/util/Formatter.html#detail">Formatter javadoc</a>. Si el carácter <code class="highlighter-rouge">%</code> no aparece tras la definición de una variable, <code class="highlighter-rouge">%s</code> es utilizado por defecto.</p>

<h3 id="interpolador-raw">Interpolador <code class="highlighter-rouge">raw</code></h3>

<p>El interpolador <code class="highlighter-rouge">raw</code> difiere del interpolador <code class="highlighter-rouge">s</code> en que el primero no realiza el escapado de literales contenidos en la cadena. A continuación se muestra un ejemplo de una cadena procesada:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>scala&gt; s"a\nb"
res0: String = 
a
b
</code></pre>
</div>

<p>En el ejemplo anterior, el interpolador <code class="highlighter-rouge">s</code> ha reemplazado los caracteres <code class="highlighter-rouge">\n</code> con un salto de linea. El interpolador <code class="highlighter-rouge">raw</code> no llevará a cabo esta acción:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>scala&gt; raw"a\nb"
res1: String = a\nb
</code></pre>
</div>

<p>Esta cadena de interpolación es muy útil cuando se desea evitar que expresiones como <code class="highlighter-rouge">\n</code> se conviertan en un salto de línea.</p>

<p>Adicionalmente a los interpoladores ofrecidos de serie por Scala, nosotros podremos definir nuestras propias cadenas de interpolación.</p>

<h2 id="uso-avanzado">Uso avanzado</h2>

<p>En Scala, todas las cadenas “procesadas” son simples transformaciones de código. En cualquier punto en el que el compilador encuentra una cadena de texto con la forma:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>id"string content"
</code></pre>
</div>

<p>la transforma en la llamada a un método (<code class="highlighter-rouge">id</code>) sobre una instancia de <a href="http://www.scala-lang.org/api/current/index.html#scala.StringContext">StringContext</a>. Este método también puede estar disponible en un ámbito implícito. Para definiir nuestra propia cadena de interpolación simplemente necesitamos crear una clase implícita que añada un nuevo método a la clase <code class="highlighter-rouge">StringContext</code>. A continuación se muestra un ejemplo:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>// Note: We extends AnyVal to prevent runtime instantiation.  See 
// value class guide for more info.
implicit class JsonHelper(val sc: StringContext) extends AnyVal {
  def json(args: Any*): JSONObject = sys.error("TODO - IMPLEMENT")
}

def giveMeSomeJson(x: JSONObject): Unit = ...

giveMeSomeJson(json"{ name: $name, id: $id }")
</code></pre>
</div>

<p>En este ejemplo, estamos intentando crear una cadena JSON mediante el uso de la interpolación de cadenas. La clase implícita <code class="highlighter-rouge">JsonHelper</code> debe estar disponible en el ámbito donde deseemos utilizar esta sintaxis, y el método <code class="highlighter-rouge">json</code> necesitaría ser implementado completamente. Sin embargo, el resutlado de dicha cadena de formateo no sería una cadena sino un objeto de tipo <code class="highlighter-rouge">JSONObject</code></p>

<p>Cuando el compilador encuentra la cadena <code class="highlighter-rouge">json"{ name: $name, id: $id }"</code> reescribe la siguiente expresión:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>new StringContext("{ name:", ",id: ", "}").json(name, id)
</code></pre>
</div>

<p>La clase implícita es utilizada para reescribir el fragmento anterior de la siguiente forma:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>new JsonHelper(new StringContext("{ name:", ",id: ", "}")).json(name, id)
</code></pre>
</div>

<p>De este modo, el método <code class="highlighter-rouge">json</code> tiene acceso a las diferentes partes de las cadenas así como cada una de las expresiones. Una implementación simple, y con errores, de este método podría ser:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>implicit class JsonHelper(val sc: StringContext) extends AnyVal {
  def json(args: Any*): JSONObject = {
    val strings = sc.parts.iterator
    val expressions = args.iterator
    var buf = new StringBuffer(strings.next)
    while(strings.hasNext) {
      buf append expressions.next
      buf append strings.next
    }
    parseJson(buf)
  }
}
</code></pre>
</div>

<p>Cada una de las diferentes partes de la cadena “procesada” son expuestas en el atributo <code class="highlighter-rouge">parts</code> de la clase <code class="highlighter-rouge">StringContext</code>. Cada uno de los valores de la expresión se pasa en el argumento <code class="highlighter-rouge">args</code> del método <code class="highlighter-rouge">json</code>. Este método acepta dichos argumentos y genera una gran cadena que posteriormente convierte en un objecto de tipo JSON. Una implementación más sofisticada podría evitar la generación de la cadena anterior y llevar a cabo de manera directa la construcción del objeto JSON a partir de las cadenas y los valores de la expresión.</p>

<h2 id="limitaciones">Limitaciones</h2>

<p>La interpolación de cadenas no funciona con sentencias “pattern matching”. Esta funcionalidad está planificada para su inclusión en la versión 2.11 de Scala.</p>

      <div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
  
    var disqus_shortname = 'scalasip'; // required: replace example with your forum shortname
  

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>

    </div>
    
    <div class="span6">
      <div id="scroller-anchor">
  <div id="scroller">
              
    <p class="contents">Contents</p>
    <div id="toc"></div>    
  </div>
</div>

    </div>
    
	
  </div>
</div>

<div class="footer">
	<div class="container">
		<ul>
			<li><h5>API</h5></li>
			<li><a href="http://www.scala-lang.org/api/current/">Current</a></li>
			<li><a href="http://www.scala-lang.org/files/archive/nightly/2.11.x/api/2.11.x/">Nightly</a></li>
		</ul>
		<ul>
			<li><h5>Learn</h5></li>
			<li><a href="/overviews">Guides & Overviews</a></li>
			<li><a href="/tutorials">Tutorials</a></li>
			<li><a href="/style">Scala Style Guide</a></li>
		</ul>
		<ul>
			<li><h5>Quickref</h5></li>
			<li><a href="/glossary">Glossary</a></li>
			<li><a href="/cheatsheets">Cheatsheets</a></li>
		</ul>
		<ul>
			<li><h5>Contribute</h5></li>
			<li><a href="http://github.com/scala/scala.github.com">Source Code</a></li>
			<li><a href="/contribute.html">Contributors Guide</a></li>
			<li><a href="http://getsatisfaction.com/scaladocs">Suggestions</a></li>
		</ul>
		<ul>
			<li><h5>Other Resources</h5></li>
			<li><a href="/sips">Scala Improvement Process</a></li>
		</ul>
	</div>
	<div class="container copyright">
 		<p>
			Copyright &copy; 2011-2015 EPFL. All rights reserved.
			<a href="https://github.com/scala/scala.github.com/commits/gh-pages.atom"><img align="right" height="20px" width="20px" src="/resources/images/rss.png" alt="RSS feed of updates to the github repo hosting this site"></a>
		</p>
	</div>
</div>

<!-- search -->
<script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script>
<script type="text/javascript"> docsearch({
  apiKey: 'b66eaeec6bd214ea6c0fcd2d7b7fdfe8',
  indexName: 'scala-docs',
  inputSelector: '#q',
	autocompleteOptions: {
    debug: true
  },
  algoliaOptions: {
		"hitsPerPage": 5,
		"facetFilters": "(tags:en)"
	}
});
</script>



<script type="text/javascript">
  $('#toc').toc({exclude: 'h1, h5, h6', context: '', autoId: true, numerate: false});
</script>

<script type="text/javascript">
  $(function() {
    moveScroller();
  });
</script>

  </body>
</html>

    
